<mat-card class="expense-summary-card">
  <mat-card-header>
    <mat-card-title>Expense Summary</mat-card-title>
  </mat-card-header>
  
  <mat-card-content>
    <!-- Summary Stats -->
    <div class="summary-stats">
      <div class="stat-item">
        <h3>${{ totalExpenses() | number:'1.2-2' }}</h3>
        <p>Total Expenses</p>
      </div>
      <div class="stat-item">
        <h3>${{ monthlyExpenses() | number:'1.2-2' }}</h3>
        <p>This Month</p>
      </div>
      <div class="stat-item">
        <h3>{{ expensesByCategory().length }}</h3>
        <p>Categories</p>
      </div>
    </div>

    <!-- Loading State -->
    @if (isLoading()) {
      <div class="loading-container">
        <mat-progress-spinner diameter="50"></mat-progress-spinner>
        <p>Loading expenses...</p>
      </div>
    }

    <!-- Error State -->
    @if (error()) {
      <div class="error-container">
        <mat-icon>error</mat-icon>
        <p>{{ error() }}</p>
      </div>
    }

    <!-- Chart Container -->
    @if (!isLoading() && !error()) {
      <div class="chart-section" role="img" aria-labelledby="chart-title">
        <h3 id="chart-title">Spending by Category</h3>
        <div class="chart-container">
          <canvas #chartCanvas width="400" height="400" 
                  role="img" 
                  aria-label="Pie chart showing expense distribution by category"
                  [attr.aria-describedby]="hasChartData() ? 'chart-description' : 'no-data-description'">
          </canvas>
          <!-- Screen reader description -->
          @if (hasChartData()) {
            <div id="chart-description" class="sr-only">
              Chart showing expenses distributed across {{ expensesByCategory().length }} categories, 
              with total spending of ${{ totalExpenses() | number:'1.2-2' }}
            </div>
          } @else {
            <div id="no-data-description" class="sr-only">
              No expense data available to display in chart
            </div>
          }
        </div>
      </div>
    }

    <!-- Debug Info (only in development) -->
    <div class="debug-info">
      <small>{{ debugInfo }}</small>
    </div>
  </mat-card-content>
</mat-card>
